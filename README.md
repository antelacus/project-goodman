# Project Goodman - AI 智能财务助手

> **项目已上线体验地址**：
> 
> https://project-goodman.vercel.app

## 项目概述

Project Goodman 是一款面向财务与合规领域的智能AI助手，支持智能文档分析、财务分析与预测、合规性指导等核心功能，具备专业、现代、统一的前端UI与交互体验。

本项目旨在通过三个核心模块全面提升财务工作效率，展示"AI如何改变和提速财务工作"的专业理解：

1. **智能文档分析** - 自动提取财务文档信息
2. **财务分析与预测** - 基于财务报表的智能分析
3. **合规性指导** - 基于财务准则的合规建议

## 技术栈

- **前端框架**: Next.js 15.3.3, React 19
- **AI 服务**: OpenAI GPT-4o, OpenAI Embeddings
- **文档处理**: pdfjs-dist, xlsx
- **状态管理**: Zustand
- **样式**: Tailwind CSS 4
- **部署**: Vercel (兼容免费版)

## 项目架构

### 数据方案
- **知识型文档**: 预处理的财务准则、税务指南等，存储在 `data/documents/` 目录
- **业务型文档**: 用户上传的财务报表、合同等，前端临时处理，不持久化存储
- **无数据库依赖**: 完全兼容 Vercel 免费版的无状态环境

### 目录结构
```
project-goodman/
├── data/
│   └── documents/          # 预处理的知识型文档 JSON 文件
│       ├── 增值税法.json
│       └── 数据资源准则.json
├── src/
│   ├── app/
│   │   ├── api/           # API 路由
│   │   │   ├── chat/      # AI 对话接口
│   │   │   ├── local-documents/  # 本地文档加载
│   │   │   ├── process-document/ # 文档处理
│   │   │   └── upload/    # 文件上传
│   │   ├── pdf-upload/    # 模块一：智能文档分析
│   │   ├── financial-analysis/  # 模块二：财务分析
│   │   └── knowledge-chat/      # 模块三：合规性指导
│   ├── components/        # 可复用组件
│   └── store/            # 状态管理
└── README.md
```

## 功能模块

### 模块一：智能文档分析 (`/pdf-upload`)
**功能描述**: 自动提取和分析PDF格式的财务文档

**核心功能**:
- ✅ 仅支持PDF格式的业务型文档上传
- ✅ 自动提取PDF文本内容
- ✅ AI智能分析文档内容
- ✅ 生成结构化分析结果
- ✅ 支持复制分析结果

**适用场景**: 发票、合同、财务报表等PDF文档的快速信息提取

### 模块二：财务分析与预测 (`/financial-analysis`)
**功能描述**: 基于知识型文档进行财务分析和预测

**核心功能**:
- ✅ 展示预加载的知识型文档（增值税法、数据资源准则等）
- ✅ 支持多选知识型文档用于分析
- ✅ AI智能对话，基于选中文档提供财务分析
- ✅ 向量相似度搜索，精准匹配相关内容
- ✅ 实时对话历史记录

**适用场景**: 财务准则咨询、税务政策分析、合规性检查

### 模块三：合规性指导 (`/knowledge-chat`)
**功能描述**: 结合知识型和业务型文档进行合规性分析和指导

**核心功能**:
- ✅ 展示预加载的知识型文档
- ✅ 支持上传业务型文档（PDF、Excel、TXT、CSV）
- ✅ 智能文档处理（文本提取、向量化、摘要生成）
- ✅ AI合规性分析和建议
- ✅ 多文档联合分析

**适用场景**: 财务合规性检查、税务筹划建议、风险识别

### 文档管理模块
**功能描述**: 统一存储项目所需用到的所有文档

**核心功能**:
- ✅ 支持"知识型"与"业务型"文档分类
- ✅ 页面侧边栏可多选文档
- ✅ 文档选择区与主内容区风格统一，支持实时同步
- ✅ 上传新文档后，所有页面文档列表自动刷新
- ✅ 支持PDF、Excel、TXT、CSV等格式的文档上传
- ✅ 上传区有"上传中.../上传成功/上传失败"进度提示

## 技术优势

### AI 能力
- **GPT-4o 模型**: 最新的大语言模型，提供高质量回答
- **向量嵌入**: 使用 OpenAI Embeddings 进行语义搜索
- **相似度计算**: 余弦相似度算法，精准匹配相关内容
- **上下文理解**: 支持多轮对话和文档上下文

### 文档处理
- **多格式支持**: PDF、Excel、TXT、CSV
- **智能分块**: 自动将文档分割为可处理的chunks
- **向量化存储**: 预处理的文档包含embedding向量
- **实时处理**: 上传文档即时处理和分析

### 用户体验
- **响应式设计**: 适配桌面和移动设备
- **实时反馈**: 加载状态、处理进度提示
- **直观操作**: 拖拽上传、多选文档、实时对话
- **错误处理**: 友好的错误提示和恢复机制

### UI/UX 设计
- **扁平化设计**: 黑白灰黄配色，顶部深灰背景导航栏，白底黑字内容区
- **导航栏**: 包含Logo、首页、三大核心功能、文档管理、展示案例、关于/帮助
- **交互设计**: 选中项下划线高亮，悬停变色，按钮为带黑边框扁平风格，悬停黑底白字
- **分步工作流**: 首页与功能页面均采用分步引导，步骤标题、提示清晰
- **AI对话优化**: 支持Markdown与LaTeX公式渲染，所有公式高亮、可点击校验
- **内容区宽度统一**: 所有功能页面内容区宽度统一为`max-w-3xl`，首页和“展示案例”页面为`max-w-6xl`，保证不同设备下的最佳阅读体验
- **样式复用**: 页面背景、标题、分割线等样式已抽象为`PageContainer`和`PageTitle`复用组件，提升一致性和维护性
- **导航栏更新**: 新增“展示案例”页面，导航栏已同步更新
- **智能文档分析交互优化**: 上传文档后自动选中，分析按钮逻辑更友好

## 部署指南

### 环境要求
- Node.js 18+ 
- npm 或 yarn
- OpenAI API Key

### 本地开发
```bash
# 克隆项目
git clone <repository-url>
cd project-goodman

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env.local
# 编辑 .env.local，添加你的 OpenAI API Key

# 启动开发服务器
npm run dev
```

### Vercel 部署
1. **准备部署**:
   ```bash
   # 构建项目
   npm run build
   
   # 检查构建结果
   npm run start
   ```

2. **Vercel 配置**:
   - 连接 GitHub 仓库
   - 设置环境变量 `OPENAI_API_KEY`
   - 选择 Next.js 框架
   - 部署到 Vercel

3. **环境变量设置**:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   ```

### 部署注意事项
- ✅ 项目已优化为无数据库依赖，完全兼容 Vercel 免费版
- ✅ 知识型文档已预处理并包含在代码仓库中
- ✅ 业务型文档仅临时处理，不占用存储空间
- ✅ API 路由已优化，支持 Vercel 的无状态环境

## 开发进度

### ✅ 已完成功能
- [x] 三个核心模块的基础功能
- [x] 文档上传和处理系统
- [x] AI 对话和向量搜索
- [x] 响应式用户界面
- [x] 错误处理和状态管理
- [x] API 路由优化
- [x] 部署准备
- [x] 顶部导航与整体UI风格
- [x] 首页与功能页面分步工作流
- [x] 文档选择与管理
- [x] 文件上传与进度提示
- [x] AI对话与LaTeX公式渲染/校验
- [x] 交互与细节优化
- [x] 合规性指导、财务分析与预测、智能文档分析三大功能模块的AI对话区UI和LaTeX校验体验已完全统一
- [x] 合规性指导页面支持业务型文档上传和多文档选择
- [x] 业务型文档在页面切换时不会丢失
- [x] 所有核心功能页面（智能文档分析、财务分析与预测、合规性指导、文档管理、关于/帮助）均已完成并可通过新路径访问
- [x] 所有导航和跳转已适配新路径
- [x] 文档管理支持批量属性编辑、重命名、分组、全选、UI优化
- [x] 关于/帮助页面已上线，含联系方式和FAQ
- [x] 移除了所有功能页面左侧文档选择区，文档选择改为弹窗，极大提升主内容区空间利用率和交互一致性
- [x] 新增通用“文档选择”弹窗（支持知识型/业务型分组、单选/多选、PDF上传、搜索/筛选、跳转文档管理）
- [x] 新增通用 ChatInputBox 组件，统一AI对话区输入体验，支持多行输入、预设提问、文档选择、发送按钮禁用提示等
- [x] 智能文档分析、财务分析与预测、合规性指导三大页面全部采用弹窗文档选择和统一对话区，支持多选/单选/上传/分组等配置
- [x] 所有AI对话区选中文档仅显示名称，交互风格与主流AI产品一致
- [x] “文档选择”弹窗支持文档名称搜索、类型筛选、PDF上传、跳转文档管理页面
- [x] 代码结构进一步优化，文档管理、弹窗、对话区等均实现高复用和解耦
- [x] 彻底移除过期的分步侧边栏、旧路由和冗余文件，保持代码整洁
- [x] 新增“展示案例”页面，集中展示各功能模块案例，便于演示和说明产品能力
- [x] 页面结构和样式高度复用，内容区宽度、标题、分割线等风格统一，维护效率提升
- [x] 智能文档分析页面交互优化，上传文档后自动选中，分析按钮逻辑更友好
- [x] 首页logo居中、简介、入口点击区域优化，删除多余按钮，整体首页UI美化
- [x] 首页logo间距、大小、简介可调，视觉更聚焦
- [x] 文档管理页面支持“预览”文件内容，弹窗展示摘要与全文
- [x] 智能文档分析页面“分析”按钮已移至最右侧，布局更合理
- [x] AI对话区支持逐字输出（打字机效果），LaTeX/Markdown渲染与高亮校验体验一致

### 2024-06-XX 更新
- prompt 管理全面重构：所有AI相关prompt集中到 src/lib/prompts.ts，结构化、注释详细，便于维护。
- 智能文档分析、财务分析与预测、合规性指导三大模块的prompt均已结构化重写，合并分析与预测，AI自动判断分析类型。
- API参数统一，前后端调用更清晰，去除analysisType分支，前端可灵活传递知识型文档名称。
- 所有涉及数字和计算的AI回复，均要求列出详细计算过程并用LaTeX公式包裹。
- 文档上传入口和限制梳理，所有上传均走/api/upload，前端多处仅支持PDF，大小限制1MB。
- 拖拽上传相关无用逻辑彻底清理，上传交互优化。
- 本地API调用增加localStorage防滥用（每日10次），localhost不受限。
- 代码结构优化，所有API路由、组件、状态管理、prompt引用关系已梳理清晰。
- 修复了API路由import路径和函数名变更导致的构建错误。
- README同步补充了开发进度和主要变更。

### 🔄 进行中
- [ ] UI/UX 优化和美化
- [ ] 性能优化
- [ ] 测试用例完善
- [ ] 展示案例制作


### 📋 计划中
- [ ] "文档管理"界面：支持文档的批量管理、删除、预览等
- [ ] "关于/帮助"界面：介绍产品、使用说明、常见问题等
- [ ] 更多文档格式支持
- [ ] 高级分析功能
- [ ] 用户权限管理
- [ ] 数据导出功能
- [ ] 语言切换
- [ ] 用户/登录
- [ ] 更多厂商API支持

## 使用说明

### 快速开始
1. 访问项目首页
2. 选择需要使用的模块
3. 按照模块指引进行操作
4. 与AI助手进行交互

### 模块选择指南
- **文档信息提取** → 模块一
- **财务准则咨询** → 模块二  
- **合规性分析** → 模块三

### 最佳实践
- 上传清晰的PDF文档以获得最佳分析结果
- 选择相关的知识型文档以获得更准确的回答
- 提供具体的问题描述以获得更有针对性的建议

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目。

## 许可证

MIT License

---
