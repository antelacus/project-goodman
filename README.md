# Project Goodman - AI 智能财务助手

## 项目概述

Project Goodman 是一个基于 Next.js + OpenAI 的 AI 财务助手，旨在通过三个核心模块全面提升财务工作效率：

1. **智能文档分析** - 自动提取财务文档信息
2. **财务分析与预测** - 基于财务报表的智能分析
3. **合规性指导** - 基于财务准则的合规建议

## 技术栈

- **前端框架**: Next.js 15.3.3, React 19
- **AI 服务**: OpenAI GPT-4o, OpenAI Embeddings
- **文档处理**: pdfjs-dist, xlsx
- **状态管理**: Zustand
- **样式**: Tailwind CSS 4
- **部署**: Vercel (兼容免费版)

## 项目架构

### 数据方案
- **知识型文档**: 预处理的财务准则、税务指南等，存储在 `data/documents/` 目录
- **业务型文档**: 用户上传的财务报表、合同等，前端临时处理，不持久化存储
- **无数据库依赖**: 完全兼容 Vercel 免费版的无状态环境

### 目录结构
```
project-goodman/
├── data/
│   └── documents/          # 预处理的知识型文档 JSON 文件
│       ├── 增值税法.json
│       └── 数据资源准则.json
├── src/
│   ├── app/
│   │   ├── api/           # API 路由
│   │   │   ├── chat/      # AI 对话接口
│   │   │   ├── local-documents/  # 本地文档加载
│   │   │   ├── process-document/ # 文档处理
│   │   │   └── upload/    # 文件上传
│   │   ├── pdf-upload/    # 模块一：智能文档分析
│   │   ├── financial-analysis/  # 模块二：财务分析
│   │   └── knowledge-chat/      # 模块三：合规性指导
│   ├── components/        # 可复用组件
│   └── store/            # 状态管理
└── README.md
```

## 功能模块

### 模块一：智能文档分析 (`/pdf-upload`)
**功能描述**: 自动提取和分析PDF格式的财务文档

**核心功能**:
- ✅ 仅支持PDF格式的业务型文档上传
- ✅ 自动提取PDF文本内容
- ✅ AI智能分析文档内容
- ✅ 生成结构化分析结果
- ✅ 支持复制分析结果

**适用场景**: 发票、合同、财务报表等PDF文档的快速信息提取

### 模块二：财务分析与预测 (`/financial-analysis`)
**功能描述**: 基于知识型文档进行财务分析和预测

**核心功能**:
- ✅ 展示预加载的知识型文档（增值税法、数据资源准则等）
- ✅ 支持多选知识型文档用于分析
- ✅ AI智能对话，基于选中文档提供财务分析
- ✅ 向量相似度搜索，精准匹配相关内容
- ✅ 实时对话历史记录

**适用场景**: 财务准则咨询、税务政策分析、合规性检查

### 模块三：合规性指导 (`/knowledge-chat`)
**功能描述**: 结合知识型和业务型文档进行合规性分析和指导

**核心功能**:
- ✅ 展示预加载的知识型文档
- ✅ 支持上传业务型文档（PDF、Excel、TXT、CSV）
- ✅ 智能文档处理（文本提取、向量化、摘要生成）
- ✅ AI合规性分析和建议
- ✅ 多文档联合分析

**适用场景**: 财务合规性检查、税务筹划建议、风险识别

## 技术特性

### AI 能力
- **GPT-4o 模型**: 最新的大语言模型，提供高质量回答
- **向量嵌入**: 使用 OpenAI Embeddings 进行语义搜索
- **相似度计算**: 余弦相似度算法，精准匹配相关内容
- **上下文理解**: 支持多轮对话和文档上下文

### 文档处理
- **多格式支持**: PDF、Excel、TXT、CSV
- **智能分块**: 自动将文档分割为可处理的chunks
- **向量化存储**: 预处理的文档包含embedding向量
- **实时处理**: 上传文档即时处理和分析

### 用户体验
- **响应式设计**: 适配桌面和移动设备
- **实时反馈**: 加载状态、处理进度提示
- **直观操作**: 拖拽上传、多选文档、实时对话
- **错误处理**: 友好的错误提示和恢复机制

## 部署指南

### 环境要求
- Node.js 18+ 
- npm 或 yarn
- OpenAI API Key

### 本地开发
```bash
# 克隆项目
git clone <repository-url>
cd project-goodman

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env.local
# 编辑 .env.local，添加你的 OpenAI API Key

# 启动开发服务器
npm run dev
```

### Vercel 部署
1. **准备部署**:
   ```bash
   # 构建项目
   npm run build
   
   # 检查构建结果
   npm run start
   ```

2. **Vercel 配置**:
   - 连接 GitHub 仓库
   - 设置环境变量 `OPENAI_API_KEY`
   - 选择 Next.js 框架
   - 部署到 Vercel

3. **环境变量设置**:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   ```

### 部署注意事项
- ✅ 项目已优化为无数据库依赖，完全兼容 Vercel 免费版
- ✅ 知识型文档已预处理并包含在代码仓库中
- ✅ 业务型文档仅临时处理，不占用存储空间
- ✅ API 路由已优化，支持 Vercel 的无状态环境

## 开发状态

### ✅ 已完成功能
- [x] 三个核心模块的基础功能
- [x] 文档上传和处理系统
- [x] AI 对话和向量搜索
- [x] 响应式用户界面
- [x] 错误处理和状态管理
- [x] API 路由优化
- [x] 部署准备

### 🔄 进行中
- [ ] UI/UX 优化和美化
- [ ] 性能优化
- [ ] 测试用例完善

### 📋 计划中
- [ ] 更多文档格式支持
- [ ] 高级分析功能
- [ ] 用户权限管理
- [ ] 数据导出功能

## 使用说明

### 快速开始
1. 访问项目首页
2. 选择需要使用的模块
3. 按照模块指引进行操作
4. 与AI助手进行交互

### 模块选择指南
- **文档信息提取** → 模块一
- **财务准则咨询** → 模块二  
- **合规性分析** → 模块三

### 最佳实践
- 上传清晰的PDF文档以获得最佳分析结果
- 选择相关的知识型文档以获得更准确的回答
- 提供具体的问题描述以获得更有针对性的建议

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目。

## 许可证

MIT License

---

**项目状态**: 🟢 功能完整，准备部署  
**最后更新**: 2024年12月  
**版本**: v1.0.0
